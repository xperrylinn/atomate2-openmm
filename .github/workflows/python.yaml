# This workflow will install Python dependencies, run tests and lint with a variety of Python versions
# For more information see: https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-python

name: atomate2-openmm tests and linting

on: [push]

jobs:
  build:
    runs-on: ubuntu-20.04

    steps:
      - name: Check out repo
        uses: actions/checkout@v2
      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: 3.8

      - uses: conda-incubator/setup-miniconda@v2
        with:
          activate-environment: anaconda-client-env
          environment-file: environment.yaml
          auto-activate-base: false
      - run: |
          conda info
          conda list

#      - name: Set up Miniconda
#        uses: conda-incubator/setup-miniconda@v2
#        with:
#          auto_update_conda: false
#          miniconda_version: latest
#
#      - name: Create Python environment
#        run: |
#          conda create -n myenv python=3.8 --yes
#          conda activate myenv
#
#      - name: Install conda dependencies
#        run: |
#          conda install -c conda-forge pip pytest openmm openff-toolkit MDAnalysis atomate2 jobflow pandas pymongo
#
#      - name: Install pip dependencies
#        run: |
#          pip install pymatgen
#          pip install git+ssh://git@github.com/orionarcher/pymatgen-io-openmm.git
#          pip install erdantic
#          pip install pytest-cov
#          pip install .

      - name: Run tests
        run: |
          pytest
